<h2>Постановка задачи</h2>
<p>На вход алгоритма поступает фотография, на которой запечатлено несколько предметов на фоне images\backgroung.jpg и многоугольник, с ограничениями указанными ниже.
Предметы, которые могут находиться на фотографии заранее известны, и их фотографии находятся в images\things. На выходе алгоритм возвращает True и выводит на экран, то как возможно расположить предметы в области многоугольника, если данные предметы можно разместить в заданной многоугольником области, и False в противном случае. Во втором случае на экран будут выведены те объекты, которые удалось поместить в многоугольник, начиная с бОльшего(если бОльший предмет никак не помещается в многоугольник выводится только нарисованная фигура)</p>


<h1>Требования</h1>
<ul>
  <li>Фотография
  <ul>
    <li>Формат .jpg или .jpeg</li>
    <li>Минимальное разрешение 632 х 1080 </li>
    <li>Фотография делается вертикально под углом 85-95 градусов</li>
    <li>Предметы и нарисованная фигура целиком помещаются в кадр</li>
    <li>Фон - светлый</li>
    </ul>
  </li>
  <li>Фигура
  <ul>
    <li>Фигура - многоугольник с не более чем 10 вершинами</li>
    <li>Фигура задается темным маркером на листе А4, расположенном в вертикальном положении</li>
    <li>Минимальное расстояние от границ фигуры до границ фото - 2 см</li>
    </ul>
  </li>
  <li>Предметы
    <ul>
      <li>Предметы полностью помещаются в кадре</li>
      <li>Предметы на фото не должны пересекаться друг с другом и с листом</li>
    <li>Предметы на фото не повторяются</li>
    <li> Предметы на фото располагаются ниже фигуры
    </ul>
  
  </li>
</ul>

<h2>План работы</h2>
<ul>
<li>Преобразовать изображение в чб, сгладить изображение и c помощью алгоритма Кэнни выделить границы многоугольника и объектов с фотографии.</li>
<li>Разделить контуры многоугольника и объектов. Думаю логично воспользоваться тем, что многоугольник изображается на белом листе А4, соответвенно вокргу него должен преобладать белый цвет</li>
  <li>Определить размеры многоугольника и предметов.</li>
<li>Первое (после перебора в лоб), что приходит в голову, это так сказать "человекоподобный алгоритм" - то как размещал бы предметы я.
  Берем предметы в порядке убывания площадей и пытаемся их разместить в углу незанятой предметами зоны. В приоритете размещать в углу той стороны многоугольника, которая наиболее похожа по размерам с одной из сторон предмета(надеюсь понятно написал).(Возможно это вообще окажется лишним, но так бы размещал я в реале:))
Тут встает вопрос: что значит разместить предмет круглой формы с указанными выше требованиями? Предлагаю при размещении таких объектов просто строить некоторый bounding box и уже его размещать. Также если на одном из шагов алгоритма площадь оставшейся зоны окажется меньше суммы площадей объектов, то алгоритм выводит false</li>
</ul>
<p>Еще подумываю над разумностью использования методов машинного обучения. Вместо размещения предметов в лоб, мне кажется, можно обучить программу на примере n фото тому помещаются ли предметы в многоугольник или нет. И с помощью условного knn уже на тестовых данных выводить тру или фолс. Единственное, тут нужно будет сильнее подзапариться с фотками) </p>
<p>Это был мой первый взгляд на задачу. Реализовывать перебор я не стал, задумывался над применением генетических алгоритмов, но отошел от этой идеи, потому что хотел попробовать написать функцию, дающую как можно более точные результаты, не полагаясь на рандом). Пытался реализовать алгоритм просто минимизируя целевую функцию, но столкнулся с проблемой на 14 тесте: алгоритм верно укладывал первую фигуру минимизировав мою целевую функцию, но он ее клал так, что становилось невозможным уложить последний предмет. Время поджимало, но я решил вернуться к идее с генетическими алгоритмами, чтобы решить эту задачу, благо лабораторная пишется на питоне, а тут огромное множество различных библиотек, в которых уже большая часть работы за тебя реализована:) Прошу прощения за лирическое отступление, к сути. Окончательный алгоритм. Повторяю следующие действия MAX_ITER(10) раз:</p>
</ol>
<li>'Бегу' по всем предметам</li>
<li> Если площадь текущего предмета больше площади нарисованной фигуры, возвращаю ложь и список предметов, которые удалось поместить</li>
<li>В первую очередь сохраняю смещение и наклон фигуры, на случай, если на этой итерации не получится уложить все предметы в многоугольник. На следующих итерациях эти данные будут использованы против функции минимизации:) А, если серьезно, то в целевой функции вводится штраф за приближение к неудачным решениям, что сильно уменьшает вероятность повторного попадания предмета в эту область</li>
<li>Пытаюсь уложить предмет в фигуру, если получилось вычитаю из множества, описывающего многоугольник, множество, описывающее, соответсвенно, предмет</li>
<li>Если на одной из итераций получилось уложить все предметы, то сразу возвращаем истину и положения предметов</li>
</ol>

<h2>Оценки качества результатов</h2>
<p>В принципе алгоритм показывает достойные результаты. С легкими тестами он справляется безошибочно, но сложные не всегда удаются. Результаты работы алгоритма можете посмотреть в intelligent_placer.ipynb. Несмотря на то, что там точность 100 процентов на тестовой выборке, алгоритм не всегда выдает правильный результат на 2 тестах. Из-за их сложности и рандома, а быть может еще из-за того, что я что-то не предусмотрел или намудрил с целевыми и штрафными функциями)</p>

<h2>Идеи по улучшению</h2>
<p>Ну, конечно, первое улучшение, которое можно было бы сделать это убрать костыль, который обязует для правильной работы программы предметы находится на фотографии ниже нарисованной фигуры.</p>
<p>Второе: это научиться распознавать предметы, чтобы бороться с перспективным искажением. Или же посмотреть другие способы(если существуют) борьбы с ним. Поскольку распознавание, конечно, хорошо, но тогда алгоритм будет правильно работать только на 10 предметах, а сейчас можно положить любой другой предмет и алгоритм должен правильно работать.</p>
<p>Третье: все таки подумать над тем, как минимизировать влияние рандома(конечно, можно увеличать количество итераций, но я имею в виду более умственную деятельность)</p>


